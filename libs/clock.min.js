"use strict";var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};!function(){function e(e){return Math.cos(e*Math.PI/180)}function t(e){return Math.sin(e*Math.PI/180)}function r(e,t,r,i,o,a){for(var n=void 0,l=t;l<=r;l++)new Date(e,i,l,o).getDay()===a&&(n=Date.UTC(e,i,l,o));return n}var i={diam:300,bgColor:"#fff",borderWidth:3,borderColor:"#000",centerDiam:6,centerColor:"#000",strokes:!0,strokeMd:!0,strokeSm:!0,strokeLgWidth:3,strokeMdWidth:2,strokeSmWidth:1,strokeLgLength:20,strokeMdLength:14,strokeSmLength:8,strokeOffset:40,strokeColor:"#000",numerals:"arabic",numeralColor:"#000",numeralOffset:20,font:"normal 16px Arial",arrowHWidth:3,arrowHLength:80,arrowMWidth:2,arrowMLength:100,arrowSWidth:1,arrowSLength:120,arrowColor:"#000",enableSecArrow:!0,tailLength:15,timeLabel:!1,labelFont:"Arial",labelFontSize:16,labelFontWeight:"300",labelColor:"#000",showDigitSec:!1,timeZone:!1,dayLightSavingTime:!1},o=void 0,a=[],n=void 0,l=[],s=[],d=[],h=[],f=[],m=[],g=void 0,c=void 0,u=void 0,v=void 0,w=void 0,b=void 0,k={init:function(){this.createCanvas(),this.drawCircle(),this.drawStrokes(),this.drawNumerals(),this.setTimeZone(),this.setDayLightSavingTime()},createCanvas:function(){u=n.diam>100?n.diam:100;var e=document.createElement("canvas"),t=n.diam,r=parseInt(n.labelFontSize),i=void 0,l=void 0,h=void 0;o.innerHTML="<canvas width='"+u+"' height='"+u+"'></canvas><canvas width='"+u+"' height='"+u+"'></canvas>",o.style.position="relative",o.style.width=u+"px";var f=o.querySelector("canvas"),m=f.nextSibling;n.timeLabel&&(e.width=t,e.height=r,o.appendChild(e),(i=m.nextSibling).id="time-label-"+a.length),m.style.position="absolute",m.style.top=0,m.style.left=0,f.id="clock-face-"+a.length,m.id="clock-arrows-"+a.length,l=i?i.getContext("2d"):null,b=f.getContext("2d"),h=m.getContext("2d"),s.push(h),d.push(l)},drawCircle:function(){v=u/2,b.beginPath(),b.strokeStyle=n.borderColor,"number"==typeof n.borderWidth&&n.borderWidth>0?(w=n.borderWidth,b.arc(v,v,v-w,0,2*Math.PI),b.lineWidth=w,b.fillStyle=n.bgColor,b.fill(),b.stroke()):(w=0,b.arc(v,v,v,0,2*Math.PI),b.fillStyle=n.bgColor,b.fill())},drawStrokes:function(){var r=n.strokeLgLength,i=n.strokeMdLength,o=n.strokeSmLength;if(n.strokes)for(var a=0;a<360;a+=6){var l=e(a)*(v-1.5*w-n.strokeOffset)+v,s=t(a)*(v-1.5*w-n.strokeOffset)+v,d=void 0,h=void 0;b.beginPath(),b.strokeStyle=n.strokeColor,a%90==0?(d=e(a)*(v-r-1.5*w-n.strokeOffset)+v,h=t(a)*(v-r-1.5*w-n.strokeOffset)+v,b.moveTo(l,s),b.lineWidth=n.strokeLgWidth,b.lineTo(d,h)):a%30==0&&n.strokeMd?(d=e(a)*(v-i-1.5*w-n.strokeOffset)+v,h=t(a)*(v-i-1.5*w-n.strokeOffset)+v,b.moveTo(l,s),b.lineWidth=n.strokeMdWidth,b.lineTo(d,h)):n.strokeSm&&(d=e(a)*(v-o-1.5*w-n.strokeOffset)+v,h=t(a)*(v-o-1.5*w-n.strokeOffset)+v,b.moveTo(l,s),b.lineWidth=n.strokeSmWidth,b.lineTo(d,h)),b.stroke()}},drawNumerals:function(){if(n.numerals){b.beginPath();for(var r=[3,4,5,6,7,8,9,10,11,12,1,2],i=["III","IV","V","VI","VII","VIII","IX","X","XI","XII","I","II"],o=void 0,a=0;a<360;a+=30){var l=e(a)*(v-1.5*w-n.numeralOffset)+v,s=t(a)*(v-1.5*w-n.numeralOffset)+v;b.textAlign="center",b.textBaseline="middle",b.font=n.font,o="roman"===n.numerals?i:r,b.fillStyle=n.numeralColor,b.fillText(o[a/30],l,s)}}},setTimeZone:function(){var e=0,t=0,r=void 0;n.timeZone&&"current"!==n.timeZone?(r=n.timeZone.split(":"),!isNaN(r[0])&&!isNaN(r[1])&&r[0]<=14&&r[0]>=-12&&(0==r[1]||30==r[1]||45==r[1])?(t=Number(r[0]),e="-"===n.timeZone[0]?-Number(r[1]):Number(r[1])):(t=0,e=0)):(t=0,e=0),h.push(t),f.push(e)},setDayLightSavingTime:function(){var e=(new Date).getUTCFullYear(),t=(new Date).getUTCFullYear()+1,i=Date.now(),o=r(e,25,31,2,1,0),a=r(e,25,31,9,1,0),l=r(e,8,14,2,2,0),s=r(e,1,7,10,2,0),d=r(e,1,7,9,16,5),h=r(t,1,7,3,16,5),f=0;f="EU"===n.dayLightSavingTime&&i>=o&&i<=a?1:"NA"===n.dayLightSavingTime&&i>=l&&i<=s?1:"AUS"===n.dayLightSavingTime&&i>=d&&i<=h?1:0,m.push(f)},getTime:function(){var r=new Date,i=r.getUTCSeconds(),o=6*i;l.forEach(function(a,n){var l=a.diam/2,u="current"===a.timeZone?r.getMinutes():r.getUTCMinutes(),v="current"===a.timeZone?r.getHours():r.getUTCHours();g=u+f[n],c=v+h[n]+m[n],k.sanitizeHourMin();var w=6*g,b=30*c+w/12;s[n].clearRect(0,0,a.diam,a.diam);var S=l+t(b)*a.arrowHLength,C=l-e(b)*a.arrowHLength;k.drawArrow(S,C,a.arrowHWidth,a,s[n]);var L=l+t(w)*a.arrowMLength,T=l-e(w)*a.arrowMLength;if(k.drawArrow(L,T,a.arrowMWidth,a,s[n]),a.enableSecArrow){var y=l+t(o)*a.arrowSLength,I=l-e(o)*a.arrowSLength,M={xtail:l-t(o)*a.tailLength,ytail:l+e(o)*a.tailLength};k.drawArrow(y,I,a.arrowSWidth,a,s[n],M)}k.drawTimeLabel(c,g,i,a,d[n]),k.drawClockCenter(a,s[n])}),window.requestAnimationFrame(k.getTime)},drawArrow:function(e,t,r,i,o,a){o.beginPath(),o.lineWidth=r,o.moveTo(i.diam/2,i.diam/2),o.lineTo(e,t),a&&(o.moveTo(i.diam/2,i.diam/2),o.lineTo(a.xtail,a.ytail)),o.strokeStyle=i.arrowColor,o.stroke(),o.closePath()},drawClockCenter:function(e,t){t.beginPath(),t.arc(e.diam/2,e.diam/2,e.centerDiam,0,2*Math.PI),t.fillStyle=e.centerColor,t.fill()},sanitizeHourMin:function(){g<0?(g+=60,c--):g>59&&(g-=60,c++),c<0?c+=24:c>23&&(c-=24)},drawTimeLabel:function(e,t,r,i,o){if(o){t=t<10?"0"+t:t,r=r<10?"0"+r:r;var a=i.labelFontSize,n=parseInt(i.labelFontSize),l=i.diam/2,s=n/2;o.beginPath(),o.font=i.labelFontWeight+" "+a+" "+i.labelFont,o.clearRect(0,0,i.diam,n),o.textAlign="center",o.textBaseline="middle",i.showDigitSec?o.fillText(e+":"+t+":"+r,l,s):o.fillText(e+":"+t,l,s),o.fillStyle=i.labelColor}}};window.setclock=function(e,t){o=document.querySelector(e),n=_extends({},i,t),a.push(e),l.push(n),k.init(),k.getTime()}}();